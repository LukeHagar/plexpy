"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

import dateutil.parser
from plex_api_client import PlexAPI
from plex_api_client.models import operations


def test_search_perform_search():
    s = PlexAPI(
        access_token="<YOUR_API_KEY_HERE>",
    )

    assert s is not None

    res = s.search.perform_search(query="dylan", limit=5)
    assert res.status_code == 200


def test_search_perform_voice_search():
    s = PlexAPI(
        access_token="<YOUR_API_KEY_HERE>",
    )

    assert s is not None

    res = s.search.perform_voice_search(query="dead+poop", limit=5)
    assert res.status_code == 200


def test_search_get_search_results():
    s = PlexAPI(
        access_token="<YOUR_API_KEY_HERE>",
    )

    assert s is not None

    res = s.search.get_search_results(query="110")
    assert res.status_code == 200
    assert res.object is not None
    assert res.object == operations.GetSearchResultsResponseBody(
        media_container=operations.GetSearchResultsMediaContainer(
            size=26,
            identifier="com.plexapp.plugins.library",
            media_tag_prefix="/system/bundle/media/flags/",
            media_tag_version=1680021154,
            metadata=[
                operations.GetSearchResultsMetadata(
                    library_section_id=1,
                    library_section_title="Movies",
                    library_section_uuid="322a231a-b7f7-49f5-920f-14c61199cd30",
                    source_title="Hera",
                    rating_key=10398,
                    key="/library/metadata/10398",
                    guid="plex://movie/5d7768284de0ee001fcc8f52",
                    studio="Paramount",
                    type="movie",
                    title="Mission: Impossible",
                    content_rating="PG-13",
                    summary="When Ethan Hunt the leader of a crack espionage team whose perilous operation has gone awry with no explanation discovers that a mole has penetrated the CIA he's surprised to learn that he's the No. 1 suspect. To clear his name Hunt now must ferret out the real double agent and in the process even the score.",
                    rating=6.6,
                    audience_rating=7.1,
                    year=1996,
                    tagline="Expect the impossible.",
                    thumb="/library/metadata/10398/thumb/1679505055",
                    art="/library/metadata/10398/art/1679505055",
                    duration=6612628,
                    originally_available_at=dateutil.parser.isoparse(
                        "1996-05-22T00:00:00Z"
                    ),
                    added_at=1589234571,
                    updated_at=1679505055,
                    audience_rating_image="rottentomatoes://image.rating.upright",
                    chapter_source="media",
                    primary_extra_key="/library/metadata/10501",
                    rating_image="rottentomatoes://image.rating.ripe",
                    media=[
                        operations.GetSearchResultsMedia(
                            id=26610,
                            duration=6612628,
                            bitrate=4751,
                            width=1916,
                            height=796,
                            aspect_ratio=2.35,
                            audio_channels=6,
                            audio_codec="aac",
                            video_codec="hevc",
                            video_resolution=1080,
                            container="mkv",
                            video_frame_rate="24p",
                            audio_profile="lc",
                            video_profile="main 10",
                            part=[
                                operations.GetSearchResultsPart(
                                    id=26610,
                                    key="/library/parts/26610/1589234571/file.mkv",
                                    duration=6612628,
                                    file="/movies/Mission Impossible (1996)/Mission Impossible (1996) Bluray-1080p.mkv",
                                    size=3926903851,
                                    audio_profile="lc",
                                    container="mkv",
                                    video_profile="main 10",
                                ),
                            ],
                        ),
                    ],
                    genre=[
                        operations.GetSearchResultsGenre(
                            tag="Action",
                        ),
                    ],
                    director=[
                        operations.GetSearchResultsDirector(
                            tag="Brian De Palma",
                        ),
                    ],
                    writer=[
                        operations.GetSearchResultsWriter(
                            tag="David Koepp",
                        ),
                    ],
                    country=[
                        operations.GetSearchResultsCountry(
                            tag="United States of America",
                        ),
                    ],
                    role=[
                        operations.GetSearchResultsRole(
                            tag="Tom Cruise",
                        ),
                    ],
                ),
            ],
            provider=[
                operations.Provider(
                    key="/system/search",
                    title="Local Network",
                    type="mixed",
                ),
            ],
        ),
    )
